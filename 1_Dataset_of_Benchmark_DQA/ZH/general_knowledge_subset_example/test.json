[
    {
        "question": "为什么无法从数据库中删除触发器？\n\n我管理的数据库之一是由我们公司的供应商提供的，我们恢复它以便从中提取数据到我们的数据仓库。我正在编写一个存储过程，用于查看数据库用户并删除所有来自供应商的用户。有一个用户，我们称之为 `userx`，无法删除，因为有一个触发器被设置为以这个用户执行，我们称之为 `trg_write_something`。当我运行：\n\n```\nDROP TRIGGER trg_write_something\n```\n\n我收到以下错误消息：\n\n```\nMsg 50000, Level 16, State 1, Procedure PreserveTrigger, Line 18\nTrigger [trg_write_something] 无法从数据库中删除。\n\nMsg 3609, Level 16, State 2, Procedure trg_write_something, Line 4\nThe transaction ended in the trigger. The batch has been aborted.\n```\n\n如果我尝试修改触发器，我会收到相同的错误。",
        "answer": "当您无法从数据库中删除触发器时，通常是因为存在一个DDL触发器，它会在您尝试删除触发器时回滚事务。DDL触发器是一种特殊类型的触发器，用于监视数据库中的数据定义语言（DDL）事件，如创建、修改或删除表、视图等。这些触发器可以干预您的操作，阻止您删除其他触发器或执行某些DDL语句。\n\n在您的情况中，当您尝试删除触发器 `trg_write_something` 时，实际上触发了名为 `PreserveTrigger` 的DDL触发器，导致事务回滚并阻止了删除操作。这种情况下，您需要先处理DDL触发器，才能成功删除目标触发器。\n\n您可以通过查询系统表 `sys.triggers` 来查找和了解DDL触发器的信息，以及通过查询 `sys.sql_modules` 来查看DDL触发器的代码。如果您确定要删除DDL触发器，可以使用 `DISABLE TRIGGER` 命令来暂时禁用触发器，而不是直接删除，以确保不会对数据库造成意外影响。\n\n总的来说，要解决无法删除触发器的问题，您需要先了解是否存在DDL触发器干扰，然后采取适当的措施来处理它们，以便顺利删除目标触发器。",
        "field": "general"
    },
    {
        "question": "C# - 连接到远程计算机中的MySQL数据库\n\n您好；我正在使用MySQL作为数据库制作一个C#桌面应用程序。当使用本地服务器“localhost”时，执行正常。但我想将其安装在其他计算机上，并保留数据库在我的计算机上。我按照以下步骤允许其他计算机连接数据库：\n\n- 我向数据库添加了一个新用户并赋予了所有必需的权限。\n- 我添加了数据库所在计算机的IP地址。这是连接字符串：\n\n```\nString connString = \"Server = '192.168.xxx.xxx';  \"\n                     + \"Port = '3306'; \"\n                     + \"Database = 'mydb'; \"\n                     + \"uid = 'dbUser'; \"\n                     + \"pwd = 'userPassword';\"\n                     + \"Persist Security Info=true;\";\n```\n\n在安装了数据库的计算机上，我可以正常执行，但从其他计算机上无法连接到数据库。它给出了错误：\n\n```\nUnable to connect to any of the specified MySQL hosts.\n```\n\n- 计算机在网络中，但不在同一域网络中。\n- 端口没有问题。请问有人可以帮帮我吗？",
        "answer": "为了让其他计算机能够连接到安装了MySQL数据库的计算机，需要确保数据库服务器的端口3306在防火墙中得到了授权。以下是更具体的解决方法：\n\n1. 打开计算机的防火墙设置，可以通过以下步骤找到：\n   - 点击“开始”菜单，搜索并打开“防火墙”设置。\n   - 在防火墙设置中，选择“高级设置”。\n\n2. 在“高级设置”中，右键单击“入站规则”，然后选择“新建规则”。\n\n3. 在新建规则向导中，选择第二个选项“端口”，然后点击“下一步”。\n\n4. 确保选择了“TCP”选项，然后选中“指定本地端口”，并添加端口3306。点击“下一步”。\n\n通过上述步骤，端口3306将被授权，这样其他计算机就可以连接到安装了MySQL数据库的计算机了。这样做可以确保网络中的其他计算机可以顺利访问数据库。\n\n另外，如果仍然无法连接到数据库，还有一些可能的原因需要检查：\n- 确保网络连接正常，可以尝试通过 ping 命令检查网络连通性。\n- 检查MySQL数据库的配置文件，确保允许远程连接。\n- 确保防火墙没有其他规则阻止了连接。\n- 可以尝试使用 telnet 命令测试端口是否可达。\n\n通过以上方法，应该能够解决无法连接到远程MySQL数据库的问题。希望这些信息对你有所帮助！如果还有其他问题，请随时提出。",
        "field": "general"
    }
]